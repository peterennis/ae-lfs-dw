#!/bin/bash
# The proper way to start a bash script

set -e -u -x
trap simple_error ERR

set +x
source ~+/SCRIPT_LIBRARY
set -x

echo ${YELLOW}"=> \$LFSVER="${LFSVER}${OFF}

green_line
echo " START "${0}
green_line
echo ${OFF}
set -x

# Output the script echo messages in yellow
echo ${YELLOW}"=> "${0}${OFF}
DateAndTime=$(date +%Y_%m_%d_%T)
# NOTE: Use logSBU.start
echo ${YELLOW}"=> "${OFF}
echo ${DateAndTime}" "${0}" Start $(PWD)" >> ~+/logSBU.start
echo

if [ ${#} -eq 2 ] ; then
        echo ${YELLOW}"=> The command line contains $# arguments"${OFF}
else
        echo ${YELLOW}"=> "$(Usage /dev/\<xxx\> 1\|2)${OFF}
        exit 1
fi

echo ${YELLOW}"=> "${0}"    "${1}"    "${2}${OFF}
if [ ${2} -ne 1 ] && [ ${2} -ne 2 ] ; then
        echo ${YELLOW}"=> The second parameter indicates 1 or 2 pass compiling."${OFF}
        echo ${YELLOW}"=> Use 1 or 2."${OFF}
        exit 1
fi

PartitionName=${1}
echo S{YELLOW}"=> "${PartitionName}${OFF}				# e.g. fc5 /dev/hdb1

set +x
green_line
echo " To create an ext4 file system on the LFS partition:"
echo "        sudo /sbin/mkfs -v -t ext4 /dev/<xxx>"
echo " If you are using an existing swap partition, there is no need to format it."
echo " If a new swap partition was created, it will need to be initialized for use"
echo " by issuing the command below."
echo "        sudo /sbin/mkswap /dev/<yyy>"
green_line
echo ${OFF}
set -x

snip_start
#echo ${YELLOW}"=> sudo /sbin/debugfs -R feature "${PartitionName}${OFF}
#sudo /sbin/debugfs -R feature ${PartitionName}
snip_end

DateAndTime=$(date +%Y_%m_%d_%T)
echo ${YELLOW}
echo ${DateAndTime}" "${0}" End $(PWD)" >> ~+/logSBU.start
echo ${YELLOW}"=> DONE "${0}${OFF}
echo
